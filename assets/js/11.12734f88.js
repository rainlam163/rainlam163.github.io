(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{492:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("哈哈哈")]),t._v(" "),a("p",[t._v("未完待续……")])]),t._v(" "),a("h2",{attrs:{id:"什么是-react-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-react-hook"}},[t._v("#")]),t._v(" 什么是 React Hook")]),t._v(" "),a("p",[t._v("React Hook 是 React 团队在 v16.8 版本后推出的一套区别于 class 组件开发体系的全新 API，是 "),a("a",{attrs:{href:"https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"}},[t._v("函数式编程"),a("OutboundLink")],1),t._v(" 里，React 函数组件的副作用解决方案。如果对于函数式编程需要深入了解的，可以移步阮一峰大神写的一篇博客《"),a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("函数式编程入门教程"),a("OutboundLink")],1),t._v("》。")]),t._v(" "),a("p",[t._v("这套 API 可以让我们不编写 class 的情况下使用 state 以及其他的 React 特性。")]),t._v(" "),a("h2",{attrs:{id:"为什么是-react-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么是-react-hook"}},[t._v("#")]),t._v(" 为什么是 React Hook")]),t._v(" "),a("p",[t._v("React Hook 是 React 的未来。")]),t._v(" "),a("p",[t._v("可能单凭这句话你还无法理解，但是看看隔壁 Vue3.0，也在推出相似的编程理念，都在重点关注可复用性、关注点分离这两点。")]),t._v(" "),a("h3",{attrs:{id:"一-类组件的缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-类组件的缺点"}},[t._v("#")]),t._v(" 一. 类组件的缺点")]),t._v(" "),a("p",[t._v("React 的核心是组件。v16.8 版本之前，组件的标准写法是类（class），即使我们只是需要一个简单的功能，我们的组件也要变得很“重”，如果加入 Redux，业务逻辑将会变得更加复杂。")]),t._v(" "),a("p",[t._v("Redux 的作者 Dan Abramov 总结了类组件的几个缺点：")]),t._v(" "),a("ul",[a("li",[t._v("大型组件很难拆分和重构，也很难测试。")]),t._v(" "),a("li",[t._v("业务逻辑分散在组件的各个方法之中，导致重复逻辑或关联逻辑。")]),t._v(" "),a("li",[t._v("组件类引入了复杂的编程模式，比如 render props 和高阶组件。")])]),t._v(" "),a("h3",{attrs:{id:"二-函数组件的限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-函数组件的限制"}},[t._v("#")]),t._v(" 二. 函数组件的限制")]),t._v(" "),a("p",[t._v("组件的最佳写法应该是函数组件，它很“轻”，不需要实例化。")]),t._v(" "),a("p",[t._v("但是很可惜，函数组件必须是纯函数，不能包含状态，也不支持生命周期方法，因此无法取代类组件。")]),t._v(" "),a("p",[a("strong",[t._v('React Hook 的设计目的，就是加强版函数组件，完全不使用"类"，就能写出一个全功能的组件。')])]),t._v(" "),a("h2",{attrs:{id:"如何使用-react-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用-react-hook"}},[t._v("#")]),t._v(" 如何使用 React Hook")]),t._v(" "),a("p",[t._v("React 约定，Hook 一律使用use前缀命名，便于识别。你要使用 xxx 功能，Hook 就命名为 usexxx。")]),t._v(" "),a("h3",{attrs:{id:"一-内置hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-内置hook"}},[t._v("#")]),t._v(" 一. 内置Hook")]),t._v(" "),a("p",[t._v("官方有提供一些内置的 Hook。")]),t._v(" "),a("h4",{attrs:{id:"_1-基础-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-基础-hook"}},[t._v("#")]),t._v(" 1. 基础 Hook")]),t._v(" "),a("h5",{attrs:{id:"_1-usestate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-usestate"}},[t._v("#")]),t._v(" 1) useState")]),t._v(" "),a("ul",[a("li",[t._v("用法")])]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("解析")])]),t._v(" "),a("p",[t._v("useState 是一个状态 Hook。在 Hook 出现之前，我们通常会把函数组件叫做 “无状态组件” ，现在 useState 的出现可以让函数组件使用状态。")]),t._v(" "),a("p",[t._v("useState 的入参是一个状态初始值，出参是一个包含状态以及更新状态的数组。")]),t._v(" "),a("p",[t._v("在初始渲染期间，返回的状态 (state) 与传入的第一个参数 (initialState) 值相同。")]),t._v(" "),a("p",[t._v("setState 函数用于更新 state。它接收一个新的 state 值并将组件的一次重新渲染加入队列。")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("在后续的重新渲染中，useState 返回的第一个值将始终是更新后最新的 state。")]),t._v(" "),a("ul",[a("li",[t._v("举个例子")])]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Example")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 声明一个叫 “count” 的 state 变量。")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("You clicked "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" times"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        Click me\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("在上面的例子中，我们的计数器是从零开始的，所以初始 state 就是 0。值得注意的是，不同于 this.state，这里的 state 不一定要是一个对象 —— 如果你有需要，它也可以是。这个初始 state 参数只有在第一次渲染时会被用到。")]),t._v(" "),a("h5",{attrs:{id:"_2-useeffect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-useeffect"}},[t._v("#")]),t._v(" 2) useEffect")]),t._v(" "),a("ul",[a("li",[t._v("用法")])]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("解析")])]),t._v(" "),a("p",[t._v("useEffect 是一个副作用 Hook，我们可以把所有产生副作用的操作都通过这个 Hook 勾进来。什么是副作用呢？数据获取、设置订阅、设置定时器、记录日志以及手动更改 React 组件中的 DOM 都属于副作用。")]),t._v(" "),a("p",[t._v("useEffect 接收 2 个参数，第一个参数是一个函数，函数体是你要进行的副作用操作，第二个参数是一个依赖数组，只有在这个依赖数组的其中任意一个元素发生了变化时，组件重新渲染才会执行副作用操作。如果依赖是一个空数组，那么这个副作用操作只会在组件第一次渲染时执行。")]),t._v(" "),a("p",[t._v("useEffect 的副作用操作如果创建了计时器或者订阅等资源，可以在在副作用操作函数里面返回一个清除函数，这样组件在卸载前就会执行这个清除函数。")]),t._v(" "),a("ul",[a("li",[t._v("举个例子")])]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" restart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setRestart "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" interval "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("restart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    interval "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("interval"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("restart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRestart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("p",[t._v("上面的例子演示了 useEffect 的使用，每秒钟 count 自动加 1，但当 restart 由 false 变成 true 的时候，会清空 count 并从 0 开始重新计算。当组件即将销毁的时候，会清除计时器。")]),t._v(" "),a("h5",{attrs:{id:"_3-usecontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-usecontext"}},[t._v("#")]),t._v(" 3) useContext")]),t._v(" "),a("h4",{attrs:{id:"_2-额外的-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-额外的-hook"}},[t._v("#")]),t._v(" 2. 额外的 Hook")]),t._v(" "),a("h5",{attrs:{id:"_1-usereducer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-usereducer"}},[t._v("#")]),t._v(" 1) useReducer")]),t._v(" "),a("h5",{attrs:{id:"_2-usecallback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-usecallback"}},[t._v("#")]),t._v(" 2) useCallback")]),t._v(" "),a("h5",{attrs:{id:"_3-usememo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-usememo"}},[t._v("#")]),t._v(" 3) useMemo")]),t._v(" "),a("h5",{attrs:{id:"_4-useref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-useref"}},[t._v("#")]),t._v(" 4) useRef")]),t._v(" "),a("h5",{attrs:{id:"_5-useimperativehandle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-useimperativehandle"}},[t._v("#")]),t._v(" 5) useImperativeHandle")]),t._v(" "),a("h5",{attrs:{id:"_6-uselayouteffect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-uselayouteffect"}},[t._v("#")]),t._v(" 6) useLayoutEffect")]),t._v(" "),a("h5",{attrs:{id:"_7-usedebugvalue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-usedebugvalue"}},[t._v("#")]),t._v(" 7) useDebugValue")]),t._v(" "),a("h3",{attrs:{id:"二-自定义hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-自定义hook"}},[t._v("#")]),t._v(" 二. 自定义Hook")]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("本文参考阮一峰大神的《"),a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/09/react-hooks.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Hooks 入门教程"),a("OutboundLink")],1),t._v("》")])])])}),[],!1,null,null,null);s.default=e.exports}}]);